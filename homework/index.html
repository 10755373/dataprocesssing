<!-- Rinus van Grunsven; 10755373 -->
<!DOCTYPE html>

<html>
	<head>
		<title>Hoogste windstoot (in 0.1 m/s) in Eindhoven op elke eerste januari van 2006 t/m 2019</title>
		<script src="https://d3js.org/d3.v3.min.js"></script>
		<style>

.bar{
	fill: green;
}

.bar:hover{
	fill: red;
}

.axis {
	font: 15px times;
}

.axis path,
.axis line {
	fill: none;
	stroke: #111;
	shape-rendering: crispEdges;
}

.x.axis path {
  display: none;
}

</style>
	</head>
	<body>
		<script type="text/javascript">

		d3.select("body").append("h2").text("Hoogste windstoot (in 0.1 m/s) in Eindhoven op elke eerste januari van 2006 t/m 2019");

		// // Setting up size variables
		// var margin = {top:20, right:20, bottom:20, left:20},
		// 		width  = 800 - margin.right - margin.left,
		// 		height = 600 - margin.bottom - margin.top;
		//
		// // Setting up y scale
		// var yScale = d3.scaleLinear()
		// 								.range([height - margin.top - margin.bottom, 0])
		// 								.domain([0, 40]);
		//
		// // Setting up x scale
		// var xScale = d3.scale.ordinal()
		//     						.rangeRoundBands([0, width - margin.right - margin.left], .1);
		// 		// vs .rangeBands() !!!!!
		//
		// // Adding a function for x-as
		// var xAxis = d3.svg.axis()
		// 							.scale(xScale)
		// 							.orient("bottom")
		// 							.ticks(14);
		//
		// // Adding a function for y-as
		// var yAxis = d3.svg.axis()
		// 						.scale(yScale)
		// 						.orient("left")
		// 						.ticks(15);
		//
		// // Determine padding
		// var barPadding = 1.5;
		// var padding = 40;
		//
		// // Setting up svg element
		// var svg = d3.select("body")
		// 		.append("svg")
		// 		.attr("width", width + margin.left + margin.right)
		// 		.attr("height", height + margin.bottom + margin.top)
		// 	.append("g")
		// 		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		//
		// // d3.json("KNMI_20190101.json").then(function(dataset){
		// // 	dataset = dataset.data
		// // 	const div = d3.select('body')
		// // 								.append('div')
		// // 								.attr('class', 'tooltip')
		// // 								.style('opacity', 0);
		// // });
		//
		// // // load the data
		// // d3.json("KNMI_20190101.json", function(dataset) {
		// //     dataset.forEach(function(d) {
		// //         datum = d.Datum;
		// //         windstoot = +d.Windstoot;
		// //     })});
		//
		// d3.json("/data/KNMI_20190101.json").then(function(data) {
		// console.log(data[0]);
		// });
		//
		// var years = ["2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019"];
		//
		// for (var i = 0; i < dataset.length; i++){
		// 	data[i]["Datum"] = years[i];
		// };
		//
		// // Create rects
		// svg.selectAll("rect")
		//    .data(dataset)
		//    .enter()
		//    .append("rect")
		//    .attr("width", width / dataset.length - barPadding)
		// 	 .attr("x", function (d, i){
		// 		 return i * (width / dataset.length) + padding;
		// 	 })
		// 	 .attr("height", function(d) {
		// 		 return d;
		// 	 })
		// 	 .attr("y", function(d){
		// 		 return height - d;
		// 	 })
		//
		// svg.selectAll("rect").filter(":nth-child(odd)")
		//  .attr("fill", function(d) {
		//      return "rgb(0, 0, " + (d * 10) + ")";
		//  });
		//
		//
		// svg.append("g")
		// 		.attr("x", -(height / 2) - margin)
		// 		.attr('y', margin / 2.4)
		// 		.attr('transform', 'rotate(-90)')
		// 		.attr('text-anchor', 'middle')
		// 		.text('Hoogste windstoot (in 0.1 m/s)');
		//
		// svg.append('text')
		// 		.attr('x', width / 2 + margin)
		// 		.attr('y', 40)
		// 		.attr('text-anchor', 'middle')
		// 		.text('Jaartal');

			// 	// set the dimensions of the canvas
			// 	var margin = {top: 10, right: 10, bottom: 60, left: 30},
			// 	    width = 900 - margin.right - margin.left,
			// 	    height = 700 - margin.bottom - margin.top;
			//
			// 	// Determine padding
			// 	var barPadding = 1.5;
			// 	var padding = 40;
			//
			// 	// add the SVG element
			// 	var svg = d3.select("body").append("svg")
			// 	    .attr("width", width + margin.right + margin.left)
			// 	    .attr("height", height + margin.bottom + margin.top)
			// 	  .append("g")
			// 	    .attr("transform",
			// 	          "translate(" + margin.left + "," + margin.top + ")");
			//
			// 	var y = d3.scale.linear()
			// 					.range([height, 0])
			// 					.domain([0, 180]);
			// 					// set the scales
			// 	var x = d3.scale.ordinal()
			// 					.rangeRoundBands([0, width - margin.left - margin.right], .5)
			// 					.domain(data.map(function(d) { return d.Datum; }));
			//
			// 	// load the data
			// 	d3.json("KNMI_20190101.json", function(error, data) {
			// 	    data.forEach(function(d) {
			// 	        d.Datum = d.Datum;
			// 	        d.Windstoot = +d.Windstoot;
			// 	    });
			// console.log(data);
			//
			// 	// // Add bar chart
			//   // svg.selectAll("rect")
			//   //     .data(data)
			//   //   	.enter()
			// 	// 		.append("rect")
			//   //     .attr("class", "bar")
			// 	// 		.attr("width", width / data.length - barPadding)
			// 	// 		.attr("x", function (d, i){
			// 	// 		 return i * (width / data.length) + padding;
			// 	// 		})
			// 	// 		.attr("y", function(d){
			// 	// 		 return height - d;
			// 	// 	 	})
			// 	// 		.attr("height", function(d) {
			// 	// 		 return d;
			// 	// 	 });
			//
			//  // Add bar chart
		  //  svg.selectAll("bar")
		  //      .data(data)
		  //    .enter().append("rect")
		  //      .attr("class", "bar")
		  //      .attr("x", function(d) { return x(d.Datum); })
		  //      .attr("width", x.rangeBand())
		  //      .attr("y", function(d) { return y(d.Windstoot); })
		  //      .attr("height", function(d) { return height - y(d.Windstoot); });
			//
			// 	var yAxis = d3.svg.axis()
			// 	  .scale(y)
			// 	  .orient("left")
			// 	  .ticks(20);
			//
			// 	svg.append("g")
			//       .attr("class", "y axis")
			//       .call(yAxis)
			//     .append("text")
			//       .attr("transform", "rotate(-90)")
			//       .attr("y", 5)
			//       .attr("dy", ".71em")
			//       .style("text-anchor", "end")
			//       .text("Windstoot");
			//
			//
			// 	// x.domain(data.map(function(d) { return datum; }));
			//
			//
			// 	// y.domain([0, d3.max(data, function(d) { return windstoot; })]);
			//
			// 	// define the axis
			// 	var xAxis = d3.svg.axis()
			// 	    .scale(x)
			// 	    .orient("bottom")
			// 			.ticks(15);
			//
			//   // add axis
			//   svg.append("g")
			//       .attr("class", "x axis")
			//       .attr("transform", "translate(0," + height + ")")
			//       .call(xAxis)
			//     .selectAll("text")
			//       .attr("transform", "rotate(-90)" )
			//       .style("text-anchor", "end")
			//       .attr("dx", "-.8em")
			//       .attr("dy", "-.55em");
			//
			// 				//
			// 				//
			// 	      // .attr("xrange", function(d) { return xrange(d.Datum); })
			// 	      // .attr("width", scale.bandwidth())
			// 	      // .attr("yrange", function(d) { return yrange(d.Windstoot); })
			// 	      // .attr("height", function(d) { return height - yrange(d.Windstoot); });
			//
			// 	});

		// Determine the margins for the canvas
		var margin = {top: 30, right: 30, bottom: 80, left: 50},
		    width = 800 - margin.left - margin.right,
		    height = 900 - margin.top - margin.bottom;

		//Determine both the range for x as well as y
		var x = d3.scale.ordinal().rangeRoundBands([0, width], .05);
		var y = d3.scale.linear().range([height, 0]);

		// Deterine xAxis
		var xAxis = d3.svg.axis()
		    .scale(x)
		    .orient("bottom")

		// Determine yAxis
		var yAxis = d3.svg.axis()
		    .scale(y)
		    .orient("left")
		    .ticks(10);

		// Make a svg
		var svg = d3.select("body").append("svg")
		    .attr("width", width + margin.left + margin.right)
		    .attr("height", height + margin.top + margin.bottom)
		  .append("g")
		    .attr("transform",
		          "translate(" + margin.left + "," + margin.top + ")");

		// Load json data
		d3.json("KNMI_20190101.json", function(error, data) {
		    data.forEach(function(d) {
		        d.Datum = d.Datum;
		        d.Windstoot = +d.Windstoot;
		    });

		  // Determine both the domain for x as well as y
		  x.domain(data.map(function(d) { return d.Datum; }));
		  y.domain([0, d3.max(data, function(d) { return d.Windstoot; })]);

		  // add axis
		  svg.append("g")
		      .attr("class", "x axis")
		      .attr("transform", "translate(0," + height + ")")
		      .call(xAxis)
		    .selectAll("text")
		      .style("text-anchor", "end")
		      .attr("dx", "-.5em")
		      .attr("dy", "-.4em")
		      .attr("transform", "rotate(-90)");

		  svg.append("g")
		      .attr("class", "y axis")
		      .call(yAxis)
		    .append("text")
		      .attr("transform", "rotate(-90)")
		      .attr("y", 6)
		      .attr("dy", ".6em")
		      .style("text-anchor", "end")
		      .text("Windstoot");

		  // Add bar chart
		  svg.selectAll("bar")
		      .data(data)
		    .enter().append("rect")
		      .attr("class", "bar")
		      .attr("x", function(d) { return x(d.Datum); })
		      .attr("width", x.rangeBand())
		      .attr("y", function(d) { return y(d.Windstoot); })
		      .attr("height", function(d) { return height - y(d.Windstoot); });


			svg.selectAll("bar")
					.data(data)
					.enter()
					.append("text")
					.text(function(d){
						return d;
					})
					.attr("x", function(d, i) {
			 			return i * (width / data.length) + 5;
					})
					.attr("y", function(d) {
			 			return height - (d * 4) + 15;
					})
					.attr("font-family", "sans-serif")
 					.attr("font-size", "11px")
 					.attr("fill", "white");

			svg.append("text")
		    .attr("x", (width / 2))
		    .attr("y", 0)
		    .attr("text-anchor", "middle")
		    .style("font-size", "14px")
				.style('fill', 'darkOrange')
		    .text("Hoogste windstoot (in 0.1 m/s) in Eindhoven op elke eerste januari van 2006 t/m 2019");

		});
		</script>
	</body>
</html>
